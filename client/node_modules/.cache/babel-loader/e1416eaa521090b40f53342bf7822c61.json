{"ast":null,"code":"import { renderFrameElements } from '../internal/renderFrameElements.js';\nimport { drawFrameElements } from '../internal/drawFrameElements.js';\nimport { transitionFrameElements } from '../internal/transitionFrameElements.js';\nconst createFrame = (svg, settings) => {\n  if (!(svg instanceof SVGSVGElement)) {\n    throw new Error('ARWES createFrame requires a <svg> element.');\n  }\n  const {\n    animator\n  } = settings;\n  let width = 0;\n  let height = 0;\n  let observer;\n  const container = settings.container ?? document.createElementNS('http://www.w3.org/2000/svg', 'g');\n  const contexts = {\n    ...settings.contexts\n  };\n  const animations = new Map();\n  const resize = () => {\n    width = Math.floor(svg.clientWidth);\n    height = Math.floor(svg.clientHeight);\n    if (svg.getAttribute('viewBox') !== `0 0 ${width} ${height}`) {\n      svg.setAttribute('viewBox', `0 0 ${width} ${height}`);\n    }\n  };\n  const render = () => {\n    renderFrameElements(container, settings.elements, animator, animations);\n  };\n  const draw = () => {\n    if (width <= 0 || height <= 0) {\n      return;\n    }\n    drawFrameElements(container, width, height, settings.elements, contexts);\n  };\n  const transition = (context, state) => {\n    contexts[context] = state;\n    draw();\n    transitionFrameElements(container, contexts, animations, settings.elements);\n  };\n  const cancel = () => {\n    observer.disconnect();\n    animations.forEach(context => context.forEach(animation => animation.cancel()));\n  };\n  const remove = () => {\n    cancel();\n    Array.from(container.children).forEach(child => child.remove());\n  };\n  container.dataset.frame = '';\n  container.style.setProperty('vector-effect', 'non-scaling-stroke');\n  resize();\n  render();\n  draw();\n  if (contexts) {\n    const contextNames = Object.keys(contexts);\n    for (const contextName of contextNames) {\n      transition(contextName, contexts[contextName]);\n    }\n  }\n  if (!container.parentNode) {\n    svg.appendChild(container);\n  }\n  let isFirstResize = true;\n  observer = new ResizeObserver(() => {\n    if (isFirstResize) {\n      isFirstResize = false;\n      return;\n    }\n    resize();\n    draw();\n  });\n  observer.observe(svg);\n  return Object.freeze({\n    get contexts() {\n      return Object.freeze({\n        ...contexts\n      });\n    },\n    render: () => {\n      resize();\n      render();\n      draw();\n    },\n    transition,\n    cancel,\n    remove\n  });\n};\nexport { createFrame };","map":{"version":3,"names":["renderFrameElements","drawFrameElements","transitionFrameElements","createFrame","svg","settings","SVGSVGElement","Error","animator","width","height","observer","container","document","createElementNS","contexts","animations","Map","resize","Math","floor","clientWidth","clientHeight","getAttribute","setAttribute","render","elements","draw","transition","context","state","cancel","disconnect","forEach","animation","remove","Array","from","children","child","dataset","frame","style","setProperty","contextNames","Object","keys","contextName","parentNode","appendChild","isFirstResize","ResizeObserver","observe","freeze"],"sources":["/home/elisha-a/Nasa/client/node_modules/@arwes/frames/build/esm/createFrame/createFrame.js"],"sourcesContent":["import { renderFrameElements } from '../internal/renderFrameElements.js';\nimport { drawFrameElements } from '../internal/drawFrameElements.js';\nimport { transitionFrameElements } from '../internal/transitionFrameElements.js';\nconst createFrame = (svg, settings) => {\n    if (!(svg instanceof SVGSVGElement)) {\n        throw new Error('ARWES createFrame requires a <svg> element.');\n    }\n    const { animator } = settings;\n    let width = 0;\n    let height = 0;\n    let observer;\n    const container = settings.container ?? document.createElementNS('http://www.w3.org/2000/svg', 'g');\n    const contexts = { ...settings.contexts };\n    const animations = new Map();\n    const resize = () => {\n        width = Math.floor(svg.clientWidth);\n        height = Math.floor(svg.clientHeight);\n        if (svg.getAttribute('viewBox') !== `0 0 ${width} ${height}`) {\n            svg.setAttribute('viewBox', `0 0 ${width} ${height}`);\n        }\n    };\n    const render = () => {\n        renderFrameElements(container, settings.elements, animator, animations);\n    };\n    const draw = () => {\n        if (width <= 0 || height <= 0) {\n            return;\n        }\n        drawFrameElements(container, width, height, settings.elements, contexts);\n    };\n    const transition = (context, state) => {\n        contexts[context] = state;\n        draw();\n        transitionFrameElements(container, contexts, animations, settings.elements);\n    };\n    const cancel = () => {\n        observer.disconnect();\n        animations.forEach((context) => context.forEach((animation) => animation.cancel()));\n    };\n    const remove = () => {\n        cancel();\n        Array.from(container.children).forEach((child) => child.remove());\n    };\n    container.dataset.frame = '';\n    container.style.setProperty('vector-effect', 'non-scaling-stroke');\n    resize();\n    render();\n    draw();\n    if (contexts) {\n        const contextNames = Object.keys(contexts);\n        for (const contextName of contextNames) {\n            transition(contextName, contexts[contextName]);\n        }\n    }\n    if (!container.parentNode) {\n        svg.appendChild(container);\n    }\n    let isFirstResize = true;\n    observer = new ResizeObserver(() => {\n        if (isFirstResize) {\n            isFirstResize = false;\n            return;\n        }\n        resize();\n        draw();\n    });\n    observer.observe(svg);\n    return Object.freeze({\n        get contexts() {\n            return Object.freeze({ ...contexts });\n        },\n        render: () => {\n            resize();\n            render();\n            draw();\n        },\n        transition,\n        cancel,\n        remove\n    });\n};\nexport { createFrame };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}